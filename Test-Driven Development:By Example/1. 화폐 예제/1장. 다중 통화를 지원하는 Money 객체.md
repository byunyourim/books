다음과 같은 보고서가 있다.

|종목|주|가격|합계|
|--|--|--|--|
|GE|400|100|4000|
|IBM|1000|25|25000|

다중 통화를 지원하는 보고서를 만들려면 통화 단위를 추가해야 한다.
|종목|주|가격|합계|
|--|--|--|--|
|IBM|1000|25 USD|25000 USD|
|Norvartis|400|150 CHF|6000 CHF|

추가로 환율도 명시해야 한다.

|기준|변환|환율|
|--|--|--|
|CHF|USD|1.5|


<br>

#### 새로운 보고서를 생성하려면 어떤 기능이 필요할까?
#### 어떤 테스트들이 있어야 보고서에 제대로 계산이 되도록하는 코드가 완성되었다는 것을 확신할 수 있을까?
- 통화가 다른 두 금액을 더해, 주어진 환율에 맞게 변한 금액을 얻을 수 있어야 한다.
- 어떤 금액을 어떤 수로 곱한 금액을 얻을 수 있어야 한다.

<br>

#### 객체가 아닌 테스트를 먼저 만들어야 한다.
#### 작은 것부터 시작하는 것이 좋다.


<br>


#### 곱셈 만들기
```java
public void testMultiplication() {
  Dolllor five = new Dollor(5);
  five.times(2);
  assertEquals(10, five.amount);
}
```

#### 위의 코드에서 어떤 컴파일 에러가 발생할까?
- Dollor 클래스 없음
- 생성자 없음
- times() 메서드 없음
- amount 필드 없음

##### 1. Dollor 클래스 생성
```java
class Dollor {}
```

##### 2. 생성자 생성
```java
Dollor (int amount) {
}
```

##### 3. times() 스텁 구현
```java
void times (int multiplier) {
}
```

##### 4. amount 필드 추가
```java
int amount;
```


<br>

#### 현재 단계에서의 목표는 완벽한 해법이 아닌 테스트를 통과시키는 것


#### 테스트의 주기
1. 작은 테스트를 하나 추가한다.
2. 모든 테스트를 실행해서 테스트가 실패하는 것을 확인한다.
3. 조금 수정한다.
4. 모든 테스트를 실행해서 테스트가 성공하는 것을 확인한다.
5. 중복을 제거하기 위해 리팩토링을 한다.



### 의존성과 중복
코드나 테스트 중 한 쪽을수정하면 반드시 다른 쪽도 수정해야 한다.  

의존성은 소프트웨어 개발의 핵심 문제이다. 의존성이 문제라면 중복은 문제의 징후다.
중복의 가장 흔한 예는 로직의 중복이다. 
프로그램에서는 중복을 제거해주면 의존성도 제거된다. 다음 테스트를 진행하기 전에 중복을 제거하여, 
오직 한가지(once and only once )의 코드 수정을 통해 다음 테스트도 통과하게될 가능성을 높인다.


```java
int amount;

Dollor(int amount) {
  this.amount = amount;
}

void times (int multiplier) {
  amount = amount * multiplier;
}
```


